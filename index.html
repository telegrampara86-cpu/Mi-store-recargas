<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tienda Digital - Recargas y Pines</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; background: #f5f5f5; }
    header { background: #111; color: #fff; padding: 15px; text-align: center; }
    h1 { margin: 0; }
    .container { max-width: 1000px; margin: auto; padding: 20px; }
    .productos { display: grid; grid-template-columns: repeat(auto-fit,minmax(250px,1fr)); gap: 20px; }
    .card { background: #fff; padding: 20px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,.1); text-align: center; }
    .card h3 { margin-top: 0; }
    .precio { font-size: 18px; font-weight: bold; color: #27ae60; margin: 10px 0; }
    button { background: #27ae60; color: #fff; border: none; padding: 10px 15px; border-radius: 8px; cursor: pointer; }
    button:hover { background: #219150; }
    footer { background: #111; color: #fff; text-align: center; padding: 10px; margin-top: 30px; }
    form { background:#fff; padding:20px; border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,.1); margin-top:30px; }
    form input, form select, form textarea { width:100%; padding:10px; margin:8px 0; border:1px solid #ccc; border-radius:8px; }
    form button { width:100%; }
  </style>
</head>
<body>
  <header>
    <h1>üõí Tienda de Pines Digitales</h1>
    <p>Precios actualizados en Bs. al d√≥lar BCV</p>
  </header>

  <div class="container">
    <div id="tasa" style="text-align:center; margin-bottom:20px;">
      Consultando tasa BCV...
    </div>

    <div class="productos">
      <div class="card">
        <h3>Free Fire 500 Diamantes</h3>
        <p>Precio: <span class="precio" data-usd="5">-</span></p>
        <button onclick="seleccionar('Free Fire 500 Diamantes')">Comprar</button>
      </div>
      <div class="card">
        <h3>Free Fire 1000 Diamantes</h3>
        <p>Precio: <span class="precio" data-usd="9">-</span></p>
        <button onclick="seleccionar('Free Fire 1000 Diamantes')">Comprar</button>
      </div>
      <div class="card">
        <h3>Netflix Gift Card 15 USD</h3>
        <p>Precio: <span class="precio" data-usd="15">-</span></p>
        <button onclick="seleccionar('Netflix Gift Card 15 USD')">Comprar</button>
      </div>
      <div class="card">
        <h3>Spotify Premium 3 Meses</h3>
        <p>Precio: <span class="precio" data-usd="12">-</span></p>
        <button onclick="seleccionar('Spotify Premium 3 Meses')">Comprar</button>
      </div>
      <div class="card">
        <h3>Xbox Live Gold 1 Mes</h3>
        <p>Precio: <span class="precio" data-usd="10">-</span></p>
        <button onclick="seleccionar('Xbox Live Gold 1 Mes')">Comprar</button>
      </div>
    </div>

    <form id="formulario">
      <h2>üì© Realizar Pedido</h2>
      <label>Nombre y Apellido:</label>
      <input type="text" id="nombre" required>
      
      <label>Correo Electr√≥nico:</label>
      <input type="email" id="correo" required>

      <label>WhatsApp:</label>
      <input type="tel" id="whatsapp" required>

      <label>Producto Seleccionado:</label>
      <input type="text" id="producto" readonly required>

      <label>Comentarios:</label>
      <textarea id="comentarios" rows="3"></textarea>

      <button type="submit">Enviar Pedido</button>
    </form>

  </div>

  <footer>
    <p>¬© 2025 Tu Tienda Digital - Todos los derechos reservados</p>
  </footer>

  <script>
    async function actualizarPrecios() {
      try {
        let res = await fetch("https://pydolarvenezuela-api.vercel.app/api/v1/dollar/bcv");
        let data = await res.json();
        let tasa = data.price;
        
        document.getElementById("tasa").innerHTML = 
          `üíµ Tasa BCV: 1 USD = <b>${tasa.toFixed(2)} Bs.</b>`;

        document.querySelectorAll(".precio").forEach(el => {
          let usd = parseFloat(el.getAttribute("data-usd"));
          let bs = usd * tasa;
          el.innerText = `${bs.toFixed(2)} Bs.`;
        });
      } catch (e) {
        document.getElementById("tasa").innerHTML = 
          "‚ö†Ô∏è No se pudo obtener la tasa BCV. Intenta m√°s tarde.";
      }
    }

    function seleccionar(producto) {
      document.getElementById("producto").value = producto;
      window.scrollTo({ top: document.getElementById("formulario").offsetTop, behavior: 'smooth' });
    }

    // ‚úÖ Enviar pedido directo a WhatsApp del usuario
    document.getElementById("formulario").addEventListener("submit", function(e){
      e.preventDefault();
      
      let nombre = document.getElementById("nombre").value;
      let correo = document.getElementById("correo").value;
      let whatsapp = document.getElementById("whatsapp").value;
      let producto = document.getElementById("producto").value;
      let comentarios = document.getElementById("comentarios").value;

      let mensaje = `üì¶ Nuevo Pedido%0A
üë§ Nombre: ${nombre}%0A
üìß Correo: ${correo}%0A
üì± WhatsApp: ${whatsapp}%0A
üõí Producto: ${producto}%0A
‚úçÔ∏è Comentarios: ${comentarios}`;

      // üëâ N√∫mero del usuario (+57 320 5854418)
      window.open(`https://wa.me/573205854418?text=${mensaje}`, "_blank");
    });

    actualizarPrecios();
  </script>
</body>
</html>
